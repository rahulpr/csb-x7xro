(this["webpackJsonpexpense-manager"]=this["webpackJsonpexpense-manager"]||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(11),r=n.n(s),a=(n(7),n(4)),i=n(0),o=Object(c.createContext)(),l=function(){return Object(c.useContext)(o)},u=function(e){var t=e.children,n=Object(c.useState)(null),s=Object(a.a)(n,2),r=s[0],l=s[1],u=Object(c.useCallback)((function(e){l({name:e.name})}),[]),j=Object(c.useCallback)((function(){l(null)}),[]);return Object(i.jsx)(o.Provider,{value:{loggedUser:r,login:u,logout:j},children:t})},j=n(2),b=n.n(j),d=n(3),p=n(5),x="AED",h=n(12);function O(){return m.apply(this,arguments)}function m(){return m=Object(d.a)(b.a.mark((function e(){var t,n,c,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},Object.keys(n).length>0&&(t+="?"+k(n)),e.next=5,fetch(t,{method:"GET"});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return v=Object(d.a)(b.a.mark((function e(){var t,n,c,s,r,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},c=new FormData,n)c.append(s,n[s]);return e.next=6,fetch(t,{method:"POST",body:c});case 6:if(!(r=e.sent)||!r.ok){e.next=13;break}return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(){return N.apply(this,arguments)}function N(){return N=Object(d.a)(b.a.mark((function e(){var t,n,c,s,r,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},(c=new FormData).append("delete",1),n)c.append(s,n[s]);return e.next=7,fetch(t,{method:"POST",body:c});case 7:return r=e.sent,e.abrupt("return",r.json());case 9:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function k(e){var t=[];for(var n in e)if("object"===typeof e[n]){var c,s=Object(h.a)(e[n]);try{for(s.s();!(c=s.n()).done;){var r=c.value;t.push("".concat(n,"[]=").concat(r))}}catch(a){s.e(a)}finally{s.f()}}else t.push("".concat(n,"=").concat(e[n]));return t.join("&")}var w="https://rahulpr.me/expense-manager/index.php/api/";function y(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(w+"expenses",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(w+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(w+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(w+"user",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){var t=e.id,n=e.setExpenses,s=Object(c.useCallback)((function(e){return Object(d.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({id:e});case 2:t.sent.status&&n((function(t){return t.filter((function(t){return t.id!==e}))}));case 4:case"end":return t.stop()}}),t)})))}),[n]);return Object(i.jsx)(p.d,{onClick:s(t),color:"red",size:16})},T=function(e){var t=e.isPrivate;e.id;return"1"===t?Object(i.jsx)(p.c,{color:"grey",size:16}):Object(i.jsx)(p.b,{color:"green",size:16})},z=function(e){var t=e.item,n=e.setFormValues,s=Object(c.useCallback)((function(){n(t)}),[t,n]);return Object(i.jsx)(p.a,{onClick:s,color:"blue",size:16})},I=function(e){var t=e.expenses,n=e.setExpenses,c=e.setFormValues,s=0,r=0,a=0;return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("table",{className:"table  align-middle",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"#"}),Object(i.jsx)("th",{scope:"col",children:"Expense Type"}),Object(i.jsx)("th",{scope:"col",className:"text-end",children:"Amount"}),Object(i.jsx)("th",{scope:"col"}),Object(i.jsx)("th",{scope:"col"})]})}),Object(i.jsx)("tbody",{children:t.map((function(e,t){return s+=parseFloat(e.amount),"1"===e.private?r+=parseFloat(e.amount):a+=parseFloat(e.amount),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)(T,{id:e.id,isPrivate:e.private})}),Object(i.jsxs)("td",{children:[e.name,Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"badge bg-info text-dark",children:e.created_at})]}),Object(i.jsxs)("td",{className:"text-end",children:[x," ",e.amount]}),Object(i.jsx)("td",{className:"text-end",children:Object(i.jsx)(z,{item:e,setFormValues:c})}),Object(i.jsx)("td",{children:Object(i.jsx)(D,{id:e.id,setExpenses:n})})]},t)}))}),Object(i.jsxs)("tfoot",{className:"text-end",children:[Object(i.jsxs)("tr",{className:"table-warning",children:[Object(i.jsx)("th",{scope:"col",colSpan:1}),Object(i.jsx)("th",{scope:"col",children:"Shared"}),Object(i.jsxs)("th",{scope:"col",children:[x," ",a]}),Object(i.jsx)("th",{scope:"col"}),Object(i.jsx)("th",{scope:"col"})]}),Object(i.jsxs)("tr",{className:"table-warning",children:[Object(i.jsx)("th",{scope:"col",colSpan:1}),Object(i.jsx)("th",{scope:"col",children:"Mine"}),Object(i.jsxs)("th",{scope:"col",children:[x," ",r]}),Object(i.jsx)("th",{scope:"col"}),Object(i.jsx)("th",{scope:"col"})]}),Object(i.jsxs)("tr",{className:"table-warning",children:[Object(i.jsx)("th",{scope:"col",colSpan:1}),Object(i.jsx)("th",{scope:"col",children:"Total"}),Object(i.jsxs)("th",{scope:"col",children:[x," ",s]}),Object(i.jsx)("th",{scope:"col"}),Object(i.jsx)("th",{scope:"col"})]})]})]})})},_=function(e){var t=e.openForm,n=e.setFormValues,s=Object(c.useState)(!0),r=Object(a.a)(s,2),o=r[0],l=r[1],u=Object(c.useState)([]),j=Object(a.a)(u,2),p=j[0],x=j[1],h=Object(c.useCallback)(Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,y();case 3:(t=e.sent).status&&x(t.expenses),l(!1);case 6:case"end":return e.stop()}}),e)}))),[]);return Object(c.useEffect)((function(){h()}),[h]),Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"row my-3",children:[Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{type:"button",className:"btn btn-success btn-sm",onClick:t,children:"Add"})}),Object(i.jsx)("div",{className:"col d-flex align-items-center",children:Object(i.jsx)("h5",{className:"text-center ",children:"Expenses"})}),Object(i.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(i.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:h,children:"Refresh"})})]}),Object(i.jsxs)("div",{className:"row",children:[o&&Object(i.jsx)("div",{className:"col d-flex justify-content-center",children:Object(i.jsx)("div",{className:"spinner-border text-primary ",role:"status",children:Object(i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),!o&&0===p.length&&Object(i.jsx)("div",{children:"No Items to Display"}),!o&&Object(i.jsx)(I,{expenses:p,setFormValues:n,setExpenses:x})]})]})},q=n(8),G=n(6),L=function(e){var t=e.closeForm,n=e.setNewExpenseAddedAt,s=e.formValues,r=null!==s,o=Object(c.useState)({name:"",amount:"",private:"1"}),l=Object(a.a)(o,2),u=l[0],j=l[1];Object(c.useEffect)((function(){null!==s&&j(s)}),[s]);var p=Object(c.useCallback)((function(e){j((function(t){return Object(G.a)(Object(G.a)({},t),{},Object(q.a)({},e.target.name,e.target.value))}))}),[]),h=Object(c.useCallback)((function(e){j((function(e){return Object(G.a)(Object(G.a)({},e),{},{private:"0"===e.private?"1":"0"})}))}),[]),O=Object(c.useCallback)(Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.name||!u.amount){e.next=8;break}return u.user_id=1,e.next=4,F(u);case 4:e.sent.status&&(n((new Date).getTime()),t()),e.next=9;break;case 8:window.alert("Fields missing");case 9:case"end":return e.stop()}}),e)}))),[n,t,u]);return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"row my-3",children:[Object(i.jsx)("div",{className:"col"}),Object(i.jsx)("div",{className:"col-6",children:Object(i.jsx)("h5",{className:"text-center ",children:"Add New"})}),Object(i.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(i.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:t,children:"Close"})})]}),Object(i.jsxs)("form",{className:"row g-3",children:[Object(i.jsx)("div",{className:"col-md-12",children:Object(i.jsxs)("div",{className:"form-check form-switch",children:[Object(i.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",onChange:h,name:"private",checked:"1"===u.private}),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"Private Expense"})]})}),Object(i.jsxs)("div",{className:"col-md-12",children:[Object(i.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Expense Name"}),Object(i.jsx)("input",{required:!0,className:"form-control",id:"inputEmail4",onChange:p,name:"name",value:u.name})]}),Object(i.jsxs)("div",{className:"col-md-12",children:[Object(i.jsx)("label",{htmlFor:"inputPassword4",className:"form-label",children:"Amount"}),Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:x}),Object(i.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:p,name:"amount",value:u.amount})]})]}),Object(i.jsx)("div",{className:"col-12",children:Object(i.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:O,children:r?"Update":"Add"})})]})]})},U=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(a.a)(r,2),l=o[0],u=o[1],j=Object(c.useState)(null),b=Object(a.a)(j,2),d=b[0],p=b[1],x=Object(c.useCallback)((function(){s(!0)}),[]),h=Object(c.useCallback)((function(){p(null),s(!1)}),[]);return Object(i.jsxs)(i.Fragment,{children:[(n||null!==d)&&Object(i.jsx)(L,{closeForm:h,setNewExpenseAddedAt:u,formValues:d}),Object(i.jsx)("div",{className:n||null!==d?"invisible":"",children:Object(i.jsx)(_,{openForm:x,setFormValues:p},l)})]})},J=n(13),M=function(){var e=l().login,t=Object(c.useCallback)(function(){var t=Object(d.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===n||void 0===n?void 0:n.profileObj)){t.next=6;break}return console.log(n.profileObj),t.next=4,P(n.profileObj);case 4:(c=t.sent).status&&e(c.user);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(i.jsx)(J.GoogleLogin,{clientId:"474519777941-480h7iifnujeofd33nu2moliisrjqtr0.apps.googleusercontent.com",buttonText:"Login",onSuccess:t,onFailure:function(e){console.log("Error -- ",e)},cookiePolicy:"single_host_origin",isSignedIn:!0})},B=function(){return null!==l().loggedUser?Object(i.jsx)(U,{}):Object(i.jsx)(M,{})};function R(){return Object(i.jsx)(u,{children:Object(i.jsx)(B,{})})}var H=document.getElementById("root");r.a.render(Object(i.jsx)(c.StrictMode,{children:Object(i.jsx)(R,{})}),H)},7:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.2951c0b2.chunk.js.map