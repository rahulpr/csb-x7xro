(this["webpackJsonpexpense-manager"]=this["webpackJsonpexpense-manager"]||[]).push([[0],{10:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(11),a=n.n(s),r=n(4),i=(n(10),n(2)),l=n.n(i),o=n(3),u=n(5),j="AED",b=n(12);function d(){return p.apply(this,arguments)}function p(){return p=Object(o.a)(l.a.mark((function e(){var t,n,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},Object.keys(n).length>0&&(t+="?"+f(n)),e.next=5,fetch(t,{method:"GET"});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function x(){return h.apply(this,arguments)}function h(){return h=Object(o.a)(l.a.mark((function e(){var t,n,c,s,a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:{},c=new FormData,n)c.append(s,n[s]);return e.next=6,fetch(t,{method:"POST",body:c});case 6:if(!(a=e.sent)||!a.ok){e.next=13;break}return e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(){return O.apply(this,arguments)}function O(){return O=Object(o.a)(l.a.mark((function e(){var t,n,c,s,a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:{},(c=new FormData).append("delete",1),n)c.append(s,n[s]);return e.next=7,fetch(t,{method:"POST",body:c});case 7:return a=e.sent,e.abrupt("return",a.json());case 9:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function f(e){var t=[];for(var n in e)if("object"===typeof e[n]){var c,s=Object(b.a)(e[n]);try{for(s.s();!(c=s.n()).done;){var a=c.value;t.push("".concat(n,"[]=").concat(a))}}catch(r){s.e(r)}finally{s.f()}}else t.push("".concat(n,"=").concat(e[n]));return t.join("&")}var v="https://rahulpr.me/expense-manager/index.php/api/";function N(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(v+"expenses",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(v+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(v+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(0),E=function(e){var t=e.id,n=e.setExpenses,s=Object(c.useCallback)((function(e){return Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure to delete?")){t.next=5;break}return t.next=3,y({id:e});case 3:t.sent.status&&n((function(t){return t.filter((function(t){return t.id!==e}))}));case 5:case"end":return t.stop()}}),t)})))}),[n]);return Object(F.jsx)(u.d,{onClick:s(t),color:"red",size:16})},S=function(e){var t=e.isPrivate;e.id;return"1"===t?Object(F.jsx)(u.c,{color:"grey",size:16}):Object(F.jsx)(u.b,{color:"green",size:16})},A=function(e){var t=e.item,n=e.setFormValues,s=Object(c.useCallback)((function(){n(t)}),[t,n]);return Object(F.jsx)(u.a,{onClick:s,color:"blue",size:16})},V=function(e){var t=e.expenses,n=e.setExpenses,c=e.setFormValues,s=0,a=0,r=0;return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("table",{className:"table  align-middle",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{scope:"col",children:"#"}),Object(F.jsx)("th",{scope:"col",children:"Expense Type"}),Object(F.jsx)("th",{scope:"col",className:"text-end",children:"Amount"}),Object(F.jsx)("th",{scope:"col"}),Object(F.jsx)("th",{scope:"col"})]})}),Object(F.jsx)("tbody",{children:t.map((function(e,t){return s+=parseFloat(e.amount),"1"===e.private?a+=parseFloat(e.amount):r+=parseFloat(e.amount),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{children:Object(F.jsx)(S,{id:e.id,isPrivate:e.private})}),Object(F.jsxs)("td",{children:[e.name,Object(F.jsx)("br",{}),Object(F.jsx)("span",{className:"badge bg-info text-dark",children:e.created_at})]}),Object(F.jsxs)("td",{className:"text-end",children:[j," ",e.amount]}),Object(F.jsx)("td",{className:"text-end",children:Object(F.jsx)(A,{item:e,setFormValues:c})}),Object(F.jsx)("td",{children:Object(F.jsx)(E,{id:e.id,setExpenses:n})})]},t)}))}),Object(F.jsxs)("tfoot",{className:"text-end",children:[Object(F.jsxs)("tr",{className:"table-warning",children:[Object(F.jsx)("th",{scope:"col",colSpan:1}),Object(F.jsx)("th",{scope:"col",children:"Shared"}),Object(F.jsxs)("th",{scope:"col",children:[j," ",r]}),Object(F.jsx)("th",{scope:"col"}),Object(F.jsx)("th",{scope:"col"})]}),Object(F.jsxs)("tr",{className:"table-warning",children:[Object(F.jsx)("th",{scope:"col",colSpan:1}),Object(F.jsx)("th",{scope:"col",children:"Mine"}),Object(F.jsxs)("th",{scope:"col",children:[j," ",a]}),Object(F.jsx)("th",{scope:"col"}),Object(F.jsx)("th",{scope:"col"})]}),Object(F.jsxs)("tr",{className:"table-warning",children:[Object(F.jsx)("th",{scope:"col",colSpan:1}),Object(F.jsx)("th",{scope:"col",children:"Total"}),Object(F.jsxs)("th",{scope:"col",children:[j," ",s]}),Object(F.jsx)("th",{scope:"col"}),Object(F.jsx)("th",{scope:"col"})]})]})]})})},z=function(e){var t=e.openForm,n=e.setFormValues,s=Object(c.useState)(!0),a=Object(r.a)(s,2),i=a[0],u=a[1],j=Object(c.useState)([]),b=Object(r.a)(j,2),d=b[0],p=b[1],x=Object(c.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,N();case 3:(t=e.sent).status&&p(t.expenses),u(!1);case 6:case"end":return e.stop()}}),e)}))),[]);return Object(c.useEffect)((function(){x()}),[x]),Object(F.jsxs)("div",{className:"container",children:[Object(F.jsxs)("div",{className:"row my-3",children:[Object(F.jsx)("div",{className:"col",children:Object(F.jsx)("button",{type:"button",className:"btn btn-success btn-sm",onClick:t,children:"Add"})}),Object(F.jsx)("div",{className:"col d-flex align-items-center",children:Object(F.jsx)("h5",{className:"text-center ",children:"Expenses"})}),Object(F.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(F.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:x,children:"Refresh"})})]}),Object(F.jsxs)("div",{className:"row",children:[i&&Object(F.jsx)("div",{className:"col d-flex justify-content-center",children:Object(F.jsx)("div",{className:"spinner-border text-primary ",role:"status",children:Object(F.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),!i&&0===d.length&&Object(F.jsx)("div",{children:"No Items to Display"}),!i&&Object(F.jsx)(V,{expenses:d,setFormValues:n,setExpenses:p})]})]})},D=n(7),P=n(6),T=function(e){var t=e.closeForm,n=e.setNewExpenseAddedAt,s=e.formValues,a=Object(c.useState)({name:"",amount:"",private:"1"}),i=Object(r.a)(a,2),u=i[0],b=i[1];Object(c.useEffect)((function(){null!==s&&b(s)}),[s]);var d=Object(c.useCallback)((function(e){b((function(t){return Object(P.a)(Object(P.a)({},t),{},Object(D.a)({},e.target.name,e.target.value))}))}),[]),p=Object(c.useCallback)((function(e){b((function(e){return Object(P.a)(Object(P.a)({},e),{},{private:"0"===e.private?"1":"0"})}))}),[]),x=Object(c.useCallback)(Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.name||!u.amount){e.next=8;break}return u.user_id=1,e.next=4,g(u);case 4:e.sent.status&&(n((new Date).getTime()),t()),e.next=9;break;case 8:window.alert("Fields missing");case 9:case"end":return e.stop()}}),e)}))),[n,t,u]);return Object(F.jsxs)("div",{className:"container",children:[Object(F.jsxs)("div",{className:"row my-3",children:[Object(F.jsx)("div",{className:"col"}),Object(F.jsx)("div",{className:"col-6",children:Object(F.jsx)("h5",{className:"text-center ",children:"Add New"})}),Object(F.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(F.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:t,children:"Close"})})]}),Object(F.jsxs)("form",{className:"row g-3",children:[Object(F.jsx)("div",{className:"col-md-12",children:Object(F.jsxs)("div",{className:"form-check form-switch",children:[Object(F.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",onChange:p,name:"private",checked:"1"===u.private}),Object(F.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"Private Expense"})]})}),Object(F.jsxs)("div",{className:"col-md-12",children:[Object(F.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Expense Name"}),Object(F.jsx)("input",{className:"form-control",id:"inputEmail4",onChange:d,name:"name",value:u.name})]}),Object(F.jsxs)("div",{className:"col-md-12",children:[Object(F.jsx)("label",{htmlFor:"inputPassword4",className:"form-label",children:"Amount"}),Object(F.jsxs)("div",{className:"input-group mb-3",children:[Object(F.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:j}),Object(F.jsx)("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:d,name:"amount",value:u.amount})]})]}),Object(F.jsx)("div",{className:"col-12",children:Object(F.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:x,children:null!==s?"Update":"Add"})})]})]})},G=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),i=Object(r.a)(a,2),l=i[0],o=i[1],u=Object(c.useState)(null),j=Object(r.a)(u,2),b=j[0],d=j[1],p=Object(c.useCallback)((function(){s(!0)}),[]),x=Object(c.useCallback)((function(){d(null),s(!1)}),[]);return Object(F.jsxs)(F.Fragment,{children:[(n||null!==b)&&Object(F.jsx)(T,{closeForm:x,setNewExpenseAddedAt:o,formValues:b}),Object(F.jsx)("div",{className:n||null!==b?"invisible":"",children:Object(F.jsx)(z,{openForm:p,setFormValues:d},l)})]})};function I(){return Object(F.jsx)(G,{})}var J=document.getElementById("root");a.a.render(Object(F.jsx)(c.StrictMode,{children:Object(F.jsx)(I,{})}),J)}},[[19,1,2]]]);
//# sourceMappingURL=main.6812cd75.chunk.js.map