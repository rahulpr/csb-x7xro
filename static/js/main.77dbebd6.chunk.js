(this["webpackJsonpexpense-manager"]=this["webpackJsonpexpense-manager"]||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(11),r=n.n(s),a=(n(7),n(4)),o=n(0),i=Object(c.createContext)(),l=function(){return Object(c.useContext)(i)},u=function(e){var t=e.children,n=Object(c.useState)(null),s=Object(a.a)(n,2),r=s[0],l=s[1],u=Object(c.useCallback)((function(e){l({name:e.name,google_id:e.google_id,image_url:e.image_url,email:e.email}),localStorage.setItem("_tkn",btoa(e.google_id))}),[]),j=Object(c.useCallback)((function(){localStorage.clear(),l(null)}),[]);return Object(o.jsx)(i.Provider,{value:{loggedUser:r,login:u,logout:j},children:t})},j=n(2),b=n.n(j),d=n(3),p=n(5),h="AED",x=n(12);function m(){return O.apply(this,arguments)}function O(){return O=Object(d.a)(b.a.mark((function e(){var t,n,c,s,r,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},c=a.length>2&&void 0!==a[2]&&a[2],Object.keys(n).length>0&&(t+="?"+k(n)),s={},c&&(s=new Headers({Authorization:"Bearer "+localStorage.getItem("_tkn")})),e.next=8,fetch(t,{method:"GET",headers:s});case 8:return r=e.sent,e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return v=Object(d.a)(b.a.mark((function e(){var t,n,c,s,r,a,o,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=i.length>0&&void 0!==i[0]?i[0]:"",n=i.length>1&&void 0!==i[1]?i[1]:{},c=i.length>2&&void 0!==i[2]&&i[2],s=new FormData,n)s.append(r,n[r]);return a={},c&&(a=new Headers({Authorization:"Bearer "+localStorage.getItem("_tkn")})),e.next=9,fetch(t,{method:"POST",body:s,headers:a});case 9:if(!(o=e.sent)||!o.ok){e.next=16;break}return e.next=13,o.json();case 13:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(){return N.apply(this,arguments)}function N(){return N=Object(d.a)(b.a.mark((function e(){var t,n,c,s,r,a,o,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=i.length>0&&void 0!==i[0]?i[0]:"",n=i.length>1&&void 0!==i[1]?i[1]:{},c=i.length>2&&void 0!==i[2]&&i[2],(s=new FormData).append("delete",1),n)s.append(r,n[r]);return a={},c&&(a=new Headers({Authorization:"Bearer "+localStorage.getItem("_tkn")})),e.next=10,fetch(t,{method:"POST",body:s,headers:a});case 10:return o=e.sent,e.abrupt("return",o.json());case 12:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function k(e){var t=[];for(var n in e)if("object"===typeof e[n]){var c,s=Object(x.a)(e[n]);try{for(s.s();!(c=s.n()).done;){var r=c.value;t.push("".concat(n,"[]=").concat(r))}}catch(a){s.e(a)}finally{s.f()}}else t.push("".concat(n,"=").concat(e[n]));return t.join("&")}var w="https://rahulpr.me/expense-manager/index.php/api/";function y(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(w+"expenses",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(w+"expense",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(w+"expense",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(w+"user",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(e){var t=e.id,n=e.setExpenses,s=Object(c.useCallback)((function(e){return Object(d.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E({id:e});case 2:t.sent.status&&n((function(t){return t.filter((function(t){return t.id!==e}))}));case 4:case"end":return t.stop()}}),t)})))}),[n]);return Object(o.jsx)(p.d,{onClick:s(t),color:"red",size:16})},P=function(e){var t=e.isPrivate;e.id;return"1"===t?Object(o.jsx)(p.c,{color:"grey",size:16}):Object(o.jsx)(p.b,{color:"green",size:16})},V=function(e){var t=e.item,n=e.setFormValues,s=Object(c.useCallback)((function(){n(t)}),[t,n]);return Object(o.jsx)(p.a,{onClick:s,color:"blue",size:16})},D=function(e){var t=e.expenses,n=e.setExpenses,c=e.setFormValues,s=0,r=0,a=0;return Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("table",{className:"table  align-middle",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"col",children:"#"}),Object(o.jsx)("th",{scope:"col",children:"Expense Type"}),Object(o.jsx)("th",{scope:"col",className:"text-end",children:"Amount"}),Object(o.jsx)("th",{scope:"col"}),Object(o.jsx)("th",{scope:"col"})]})}),Object(o.jsx)("tbody",{children:t.map((function(e,t){return s+=parseFloat(e.amount),"1"===e.private?r+=parseFloat(e.amount):a+=parseFloat(e.amount),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)(P,{id:e.id,isPrivate:e.private})}),Object(o.jsxs)("td",{children:[e.name,Object(o.jsx)("br",{}),Object(o.jsx)("span",{className:"badge bg-info text-dark",children:e.created_at})]}),Object(o.jsxs)("td",{className:"text-end",children:[h," ",e.amount]}),Object(o.jsx)("td",{className:"text-end",children:Object(o.jsx)(V,{item:e,setFormValues:c})}),Object(o.jsx)("td",{children:Object(o.jsx)(I,{id:e.id,setExpenses:n})})]},t)}))}),Object(o.jsxs)("tfoot",{className:"text-end",children:[Object(o.jsxs)("tr",{className:"table-warning",children:[Object(o.jsx)("th",{scope:"col",colSpan:1}),Object(o.jsx)("th",{scope:"col",children:"Shared"}),Object(o.jsxs)("th",{scope:"col",children:[h," ",a]}),Object(o.jsx)("th",{scope:"col"}),Object(o.jsx)("th",{scope:"col"})]}),Object(o.jsxs)("tr",{className:"table-warning",children:[Object(o.jsx)("th",{scope:"col",colSpan:1}),Object(o.jsx)("th",{scope:"col",children:"Mine"}),Object(o.jsxs)("th",{scope:"col",children:[h," ",r]}),Object(o.jsx)("th",{scope:"col"}),Object(o.jsx)("th",{scope:"col"})]}),Object(o.jsxs)("tr",{className:"table-warning",children:[Object(o.jsx)("th",{scope:"col",colSpan:1}),Object(o.jsx)("th",{scope:"col",children:"Total"}),Object(o.jsxs)("th",{scope:"col",children:[h," ",s]}),Object(o.jsx)("th",{scope:"col"}),Object(o.jsx)("th",{scope:"col"})]})]})]})})},T=function(e){var t=e.openForm,n=e.setFormValues,s=Object(c.useState)(!0),r=Object(a.a)(s,2),i=r[0],l=r[1],u=Object(c.useState)([]),j=Object(a.a)(u,2),p=j[0],h=j[1],x=Object(c.useCallback)(Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,y();case 3:(t=e.sent).status&&h(t.expenses),l(!1);case 6:case"end":return e.stop()}}),e)}))),[]);return Object(c.useEffect)((function(){x()}),[x]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"row my-3",children:[Object(o.jsx)("div",{className:"col",children:Object(o.jsx)("button",{type:"button",className:"btn btn-success btn-sm",onClick:t,children:"Add"})}),Object(o.jsx)("div",{className:"col d-flex align-items-center",children:Object(o.jsx)("h5",{className:"text-center ",children:"Expenses"})}),Object(o.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(o.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:x,children:"Refresh"})})]}),Object(o.jsxs)("div",{className:"row",children:[i&&Object(o.jsx)("div",{className:"col d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border text-primary ",role:"status",children:Object(o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),!i&&0===p.length&&Object(o.jsx)("div",{children:"No Items to Display"}),!i&&Object(o.jsx)(D,{expenses:p,setFormValues:n,setExpenses:h})]})]})},B=n(8),q=n(6),G=function(e){var t=e.closeForm,n=e.setNewExpenseAddedAt,s=e.formValues,r=null!==s,i=Object(c.useState)({name:"",amount:"",private:"1"}),l=Object(a.a)(i,2),u=l[0],j=l[1];Object(c.useEffect)((function(){null!==s&&j(s)}),[s]);var p=Object(c.useCallback)((function(e){j((function(t){return Object(q.a)(Object(q.a)({},t),{},Object(B.a)({},e.target.name,e.target.value))}))}),[]),x=Object(c.useCallback)((function(e){j((function(e){return Object(q.a)(Object(q.a)({},e),{},{private:"0"===e.private?"1":"0"})}))}),[]),m=Object(c.useCallback)(Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.name||!u.amount){e.next=8;break}return u.user_id=1,e.next=4,S(u);case 4:e.sent.status&&(n((new Date).getTime()),t()),e.next=9;break;case 8:window.alert("Fields missing");case 9:case"end":return e.stop()}}),e)}))),[n,t,u]);return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"row my-3",children:[Object(o.jsx)("div",{className:"col"}),Object(o.jsx)("div",{className:"col-6",children:Object(o.jsx)("h5",{className:"text-center ",children:"Add New"})}),Object(o.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(o.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:t,children:"Close"})})]}),Object(o.jsxs)("form",{className:"row g-3",children:[Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsxs)("div",{className:"form-check form-switch",children:[Object(o.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",onChange:x,name:"private",checked:"1"===u.private}),Object(o.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"Private Expense"})]})}),Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Expense Name"}),Object(o.jsx)("input",{required:!0,className:"form-control",id:"inputEmail4",onChange:p,name:"name",value:u.name})]}),Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsx)("label",{htmlFor:"inputPassword4",className:"form-label",children:"Amount"}),Object(o.jsxs)("div",{className:"input-group mb-3",children:[Object(o.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:h}),Object(o.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:p,name:"amount",value:u.amount})]})]}),Object(o.jsx)("div",{className:"col-12",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:m,children:r?"Update":"Add"})})]})]})},H=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),i=Object(a.a)(r,2),l=i[0],u=i[1],j=Object(c.useState)(null),b=Object(a.a)(j,2),d=b[0],p=b[1],h=Object(c.useCallback)((function(){s(!0)}),[]),x=Object(c.useCallback)((function(){p(null),s(!1)}),[]);return Object(o.jsxs)(o.Fragment,{children:[(n||null!==d)&&Object(o.jsx)(G,{closeForm:x,setNewExpenseAddedAt:u,formValues:d}),Object(o.jsx)("div",{className:n||null!==d?"invisible":"",children:Object(o.jsx)(T,{openForm:h,setFormValues:p},l)})]})},L=n(13),U=function(){var e=l(),t=e.login,n=e.logout,s=Object(c.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||void 0===n?void 0:n.profileObj)){e.next=5;break}return e.next=3,_(n.profileObj);case 3:(c=e.sent).status&&t(c.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(o.jsx)(L.GoogleLogin,{clientId:"474519777941-480h7iifnujeofd33nu2moliisrjqtr0.apps.googleusercontent.com",buttonText:"Login",onSuccess:s,onFailure:function(e){console.log("Error -- ",e),n()},cookiePolicy:"single_host_origin",isSignedIn:!0})},J=function(){return null!==l().loggedUser?Object(o.jsx)(H,{}):Object(o.jsx)(U,{})};function M(){return Object(o.jsx)(u,{children:Object(o.jsx)(J,{})})}var R=document.getElementById("root");r.a.render(Object(o.jsx)(c.StrictMode,{children:Object(o.jsx)(M,{})}),R)},7:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.77dbebd6.chunk.js.map