(this["webpackJsonpexpense-manager"]=this["webpackJsonpexpense-manager"]||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(11),r=n.n(s),a=(n(7),n(4)),l=n(0),i=Object(c.createContext)(),o=function(e){var t=e.children,n=Object(c.useState)(null),s=Object(a.a)(n,2),r=s[0],o=s[1],u=Object(c.useCallback)((function(e){o({name:e.name})}),[]),j=Object(c.useCallback)((function(){o(null)}),[]);return Object(l.jsx)(i.Provider,{value:{loggedUser:r,login:u,logout:j},children:t})},u=n(2),j=n.n(u),b=n(3),d=n(5),p="AED",x=n(12);function h(){return m.apply(this,arguments)}function m(){return m=Object(b.a)(j.a.mark((function e(){var t,n,c,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},Object.keys(n).length>0&&(t+="?"+N(n)),e.next=5,fetch(t,{method:"GET"});case 5:return c=e.sent,e.abrupt("return",c.json());case 7:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function O(){return f.apply(this,arguments)}function f(){return f=Object(b.a)(j.a.mark((function e(){var t,n,c,s,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},c=new FormData,n)c.append(s,n[s]);return e.next=6,fetch(t,{method:"POST",body:c});case 6:if(!(r=e.sent)||!r.ok){e.next=13;break}return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return g=Object(b.a)(j.a.mark((function e(){var t,n,c,s,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},(c=new FormData).append("delete",1),n)c.append(s,n[s]);return e.next=7,fetch(t,{method:"POST",body:c});case 7:return r=e.sent,e.abrupt("return",r.json());case 9:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function N(e){var t=[];for(var n in e)if("object"===typeof e[n]){var c,s=Object(x.a)(e[n]);try{for(s.s();!(c=s.n()).done;){var r=c.value;t.push("".concat(n,"[]=").concat(r))}}catch(a){s.e(a)}finally{s.f()}}else t.push("".concat(n,"=").concat(e[n]));return t.join("&")}var k="https://rahulpr.me/expense-manager/index.php/api/";function w(e){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(k+"expenses",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(k+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(k+"expense",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){var t=e.id,n=e.setExpenses,s=Object(c.useCallback)((function(e){return Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({id:e});case 2:t.sent.status&&n((function(t){return t.filter((function(t){return t.id!==e}))}));case 4:case"end":return t.stop()}}),t)})))}),[n]);return Object(l.jsx)(d.d,{onClick:s(t),color:"red",size:16})},P=function(e){var t=e.isPrivate;e.id;return"1"===t?Object(l.jsx)(d.c,{color:"grey",size:16}):Object(l.jsx)(d.b,{color:"green",size:16})},V=function(e){var t=e.item,n=e.setFormValues,s=Object(c.useCallback)((function(){n(t)}),[t,n]);return Object(l.jsx)(d.a,{onClick:s,color:"blue",size:16})},D=function(e){var t=e.expenses,n=e.setExpenses,c=e.setFormValues,s=0,r=0,a=0;return Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("table",{className:"table  align-middle",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Expense Type"}),Object(l.jsx)("th",{scope:"col",className:"text-end",children:"Amount"}),Object(l.jsx)("th",{scope:"col"}),Object(l.jsx)("th",{scope:"col"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e,t){return s+=parseFloat(e.amount),"1"===e.private?r+=parseFloat(e.amount):a+=parseFloat(e.amount),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(P,{id:e.id,isPrivate:e.private})}),Object(l.jsxs)("td",{children:[e.name,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"badge bg-info text-dark",children:e.created_at})]}),Object(l.jsxs)("td",{className:"text-end",children:[p," ",e.amount]}),Object(l.jsx)("td",{className:"text-end",children:Object(l.jsx)(V,{item:e,setFormValues:c})}),Object(l.jsx)("td",{children:Object(l.jsx)(A,{id:e.id,setExpenses:n})})]},t)}))}),Object(l.jsxs)("tfoot",{className:"text-end",children:[Object(l.jsxs)("tr",{className:"table-warning",children:[Object(l.jsx)("th",{scope:"col",colSpan:1}),Object(l.jsx)("th",{scope:"col",children:"Shared"}),Object(l.jsxs)("th",{scope:"col",children:[p," ",a]}),Object(l.jsx)("th",{scope:"col"}),Object(l.jsx)("th",{scope:"col"})]}),Object(l.jsxs)("tr",{className:"table-warning",children:[Object(l.jsx)("th",{scope:"col",colSpan:1}),Object(l.jsx)("th",{scope:"col",children:"Mine"}),Object(l.jsxs)("th",{scope:"col",children:[p," ",r]}),Object(l.jsx)("th",{scope:"col"}),Object(l.jsx)("th",{scope:"col"})]}),Object(l.jsxs)("tr",{className:"table-warning",children:[Object(l.jsx)("th",{scope:"col",colSpan:1}),Object(l.jsx)("th",{scope:"col",children:"Total"}),Object(l.jsxs)("th",{scope:"col",children:[p," ",s]}),Object(l.jsx)("th",{scope:"col"}),Object(l.jsx)("th",{scope:"col"})]})]})]})})},T=function(e){var t=e.openForm,n=e.setFormValues,s=Object(c.useState)(!0),r=Object(a.a)(s,2),i=r[0],o=r[1],u=Object(c.useState)([]),d=Object(a.a)(u,2),p=d[0],x=d[1],h=Object(c.useCallback)(Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,w();case 3:(t=e.sent).status&&x(t.expenses),o(!1);case 6:case"end":return e.stop()}}),e)}))),[]);return Object(c.useEffect)((function(){h()}),[h]),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row my-3",children:[Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("button",{type:"button",className:"btn btn-success btn-sm",onClick:t,children:"Add"})}),Object(l.jsx)("div",{className:"col d-flex align-items-center",children:Object(l.jsx)("h5",{className:"text-center ",children:"Expenses"})}),Object(l.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(l.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:h,children:"Refresh"})})]}),Object(l.jsxs)("div",{className:"row",children:[i&&Object(l.jsx)("div",{className:"col d-flex justify-content-center",children:Object(l.jsx)("div",{className:"spinner-border text-primary ",role:"status",children:Object(l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),!i&&0===p.length&&Object(l.jsx)("div",{children:"No Items to Display"}),!i&&Object(l.jsx)(D,{expenses:p,setFormValues:n,setExpenses:x})]})]})},z=n(8),I=n(6),_=function(e){var t=e.closeForm,n=e.setNewExpenseAddedAt,s=e.formValues,r=null!==s,i=Object(c.useState)({name:"",amount:"",private:"1"}),o=Object(a.a)(i,2),u=o[0],d=o[1];Object(c.useEffect)((function(){null!==s&&d(s)}),[s]);var x=Object(c.useCallback)((function(e){d((function(t){return Object(I.a)(Object(I.a)({},t),{},Object(z.a)({},e.target.name,e.target.value))}))}),[]),h=Object(c.useCallback)((function(e){d((function(e){return Object(I.a)(Object(I.a)({},e),{},{private:"0"===e.private?"1":"0"})}))}),[]),m=Object(c.useCallback)(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.name||!u.amount){e.next=8;break}return u.user_id=1,e.next=4,C(u);case 4:e.sent.status&&(n((new Date).getTime()),t()),e.next=9;break;case 8:window.alert("Fields missing");case 9:case"end":return e.stop()}}),e)}))),[n,t,u]);return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row my-3",children:[Object(l.jsx)("div",{className:"col"}),Object(l.jsx)("div",{className:"col-6",children:Object(l.jsx)("h5",{className:"text-center ",children:"Add New"})}),Object(l.jsx)("div",{className:"col d-flex justify-content-end align-items-center",children:Object(l.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:t,children:"Close"})})]}),Object(l.jsxs)("form",{className:"row g-3",children:[Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsxs)("div",{className:"form-check form-switch",children:[Object(l.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",onChange:h,name:"private",checked:"1"===u.private}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"Private Expense"})]})}),Object(l.jsxs)("div",{className:"col-md-12",children:[Object(l.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Expense Name"}),Object(l.jsx)("input",{required:!0,className:"form-control",id:"inputEmail4",onChange:x,name:"name",value:u.name})]}),Object(l.jsxs)("div",{className:"col-md-12",children:[Object(l.jsx)("label",{htmlFor:"inputPassword4",className:"form-label",children:"Amount"}),Object(l.jsxs)("div",{className:"input-group mb-3",children:[Object(l.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:p}),Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:x,name:"amount",value:u.amount})]})]}),Object(l.jsx)("div",{className:"col-12",children:Object(l.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:m,children:r?"Update":"Add"})})]})]})},q=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),i=Object(a.a)(r,2),o=i[0],u=i[1],j=Object(c.useState)(null),b=Object(a.a)(j,2),d=b[0],p=b[1],x=Object(c.useCallback)((function(){s(!0)}),[]),h=Object(c.useCallback)((function(){p(null),s(!1)}),[]);return Object(l.jsxs)(l.Fragment,{children:[(n||null!==d)&&Object(l.jsx)(_,{closeForm:h,setNewExpenseAddedAt:u,formValues:d}),Object(l.jsx)("div",{className:n||null!==d?"invisible":"",children:Object(l.jsx)(T,{openForm:x,setFormValues:p},o)})]})},G=n(13),L=function(){var e=function(e){console.log(e)};return Object(l.jsx)(G.GoogleLogin,{clientId:"474519777941-480h7iifnujeofd33nu2moliisrjqtr0.apps.googleusercontent.com",buttonText:"Login",onSuccess:e,onFailure:e,cookiePolicy:"single_host_origin",isSignedIn:!0})},U=function(){return null!==Object(c.useContext)(i).loggedUser?Object(l.jsx)(q,{}):Object(l.jsx)(L,{})};function J(){return Object(l.jsx)(o,{children:Object(l.jsx)(U,{})})}var M=document.getElementById("root");r.a.render(Object(l.jsx)(c.StrictMode,{children:Object(l.jsx)(J,{})}),M)},7:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.e804d91e.chunk.js.map